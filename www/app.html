<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>SWISH</title>
    <meta name="description" content="">
    <meta name="author" content="Torbjörn Lager">
    <!-- CSS -->
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/app.css">
    <link rel="shortcut icon" href="/favicon.ico" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="vendor/bootstrap/js/html5shiv.js"></script>
    <![endif]-->
  </head>
  <body>
    <!-- Part 1: Wrap all page content here -->
    <div id="wrap">
      <!-- Fixed navbar -->
      <!-- Fixed navbar -->
      <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container pull-left">
            <a class="brand" href="#">&nbsp;&nbsp;<b><span style="color:darkblue">SWI</span><span style="color:maroon">SH</span></b></a>
            <ul class="nav">
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">File<b class="caret"></b></a>
                <ul id="file-menu" class="dropdown-menu">
                  <li class="dropdown-submenu">
                      <a tabindex="-1" href="#">Examples</a>
                      <ul id="example-menu" class="dropdown-menu">
	                      <li><a href="/examples/kb.pl">Knowledge bases</a></li>
	                      <li><a href="/examples/lists.pl">Lists</a></li>
	                      <li><a href="/examples/io.pl">Read and write</a></li>
	                      <li><a href="/examples/database.pl">Assert and retract</a></li>
	                      <li><a href="/examples/grammar.pl">DCG grammar</a></li>
	                      <li><a href="/examples/eliza.pl">Eliza</a></li>
	                      <li><a href="/examples/expert-system.pl">Expert system</a></li>
	                      <li><a href="/examples/queens.pl">Queens</a></li>
	                      <li><a href="/examples/clpfd.pl">CLP(FD)</a></li>
					  </ul>
                  </li>    
                  <li class="divider"></li>
                  <li><a id="print">Print...</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Edit<b class="caret"></b></a>
                <ul id="edit-menu" class="dropdown-menu">
                  <li><a id="undo">Undo</a></li>
                  <li><a id="redo">Redo</a></li>
                  <li class="divider"></li>
                  <li><a id="indent">Indent</a></li>
                  <li><a id="outdent">Outdent</a></li>
                  <li class="divider"></li>
                  <li><a id="comment">Toggle comment</a></li>
                  <li class="divider"></li>
                  <li><a id="find">Find and replace...</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Help<b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="#about" data-toggle="modal">About...</a></li>
                  <li class="divider"></li>
                  <li><a href="#help" data-toggle="modal">Help...</a></li>
                </ul>
              </li>
            </ul>
            <button id="save-btn" class="btn" disabled>Save</button>
            <button id="update-btn" class="btn hide">Update</button>
            <a id="share-btn" href="#share" data-toggle="modal" class="btn hide">Share</a>
          </div>
        </div>
      </div>
      <div id="share" class="modal hide fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
          <h3 id="myModalLabel">Share your program!</h3>
        </div>
        <div class="modal-body">
          <p>Your program is saved to the <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> server for a period of at least one month. A link to it is given below. Copy the link, send it around, do what you want with it. Anyone in possession of the link will be able to access <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> with your program loaded and ready to run.</p>
          <p>
            Here is the link: <input style="position:relative;top:4px;" class="input-xlarge" type="text" id="url" onclick="this.select()" value="">
          </p>
        </div>
      </div>
      <div id="about" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
          <h4 id="myModalLabel">About <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span><span class="pull-right">Version 0.7&nbsp;&nbsp;</span></h4>
        </div>
        <div class="modal-body">
          <p><span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> is an homage to SWI-Prolog, written by Torbjörn Lager, Professor of General and Computational Linguistics at the <a target="_blank" href="http://www.flov.gu.se/">Department of Philosopy, Linguistics and Theory of Science</a> at the <a target="_blank" href="http://www.gu.se/">University of Gothenburg</a>. Also member of the <a target="_blank" href="http://www.clt.gu.se/">Center for Language Technology</a> in Gothenburg, and sadly just about the only one there who still cares about Prolog. Taught himself Prolog when as a student he started doing computational linguistics back in 1986, used SICStus Prolog for many years, then left Prolog for some time while exploring languages such as Oz, Python and JavaScript. Got interested in the Web and thus drifted back to using Prolog and... SWI-Prolog this time! Because if your are interested in both Prolog and the Web, there really is no better tool than SWI-Prolog. Thank you Jan.
          </p>
        </div>
      </div>
      <div id="help" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
          <h2 id="myModalLabel"><span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> = <span style="color:darkblue">SWI</span>-Prolog for <span style="color:maroon">SH</span>aring</h2>
        </div>
        <div class="modal-body">
          <h4>Table of Contents</h4>
          <ul>
            <li><a href="#motivation">Motivation</a></li>
            <li><a href="#exampls">Examples</a></li>
            <li><a href="#time_limit">Time limit</a></li>
            <li><a href="#known_issues">Known issues</a></li>
            <li><a href="#technology">Technology</a></li>
            <li><a href="#license">License</a></li>
            <li><a href="#source_code">Source code</a></li>
          </ul>
          <h4 id="motivation">Motivation</h4>
          <p>
            <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> is inspired by web-based tools such as <a target="_blank" href="http://jsfiddle.net/">JSFIDDLE</a> in that it allows you to develop a program and then share it with others on the Web. However, lacking both debugger and profiler, <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> is far from a full-fledged IDE for Prolog, and to avoid compromising the server it does not allow you to execute "dangerous" predicates such as predicates reading and writing files. (It does however allow you to use <code>read/1</code> and <code>write/1</code> but they will only read from and write to your web browser.) 
          </p>
          <p>
            <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> might be useful in an educational setting. If you are a teacher, you may want to tell your students to share with you the solutions to exercises by sending you a link to <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> loaded with their solutions ready to run. 
          </p>
          <p>
            <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> also serves as a demonstration of the fact that there really is no need for a web-based Prolog application to generate HTML on the server side. See <a href="#technology">Technology</a> for details.
          </p>
          <p>
            Yes, and talking to SWI-Prolog from an iPad or maybe even a smartphone should also work, although it has not been extensively tested yet.
          </p>
          <h4 id="exampls">Examples</h4>
          <p>
            If you include example goals inside comments as shown below, they will be used to populate the example menu and make the first goal show in the Goal input field. 
          </p>
          <pre style="font-size:80%">
/** Examples

loves(X, mia).
jealous(X, Y).

*/</pre>
          <h4 id="time_limit">Time limit</h4>
          <p>
            When you click the Solve button, your goal will be allowed to execute on the server for 15 seconds before aborting and returning with a message stating that the time limit has been exceeded. The plan is to increase this limit in the future.
          </p>
          <h4 id="known_issues">Known issues</h4>
          <p>
          <ul>
            <li><span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> works fine in Safari, Firefox and Chrome. I have not tested it in Internet Explorer, so I don't know if it works there. 
            </li>
            <li>The syntax highlighting of Prolog source code as provided by the <a target="_blank" href="http://ace.ajax.org/">ACE editor</a> is slightly off sometimes. The relevant file is <a target="_blank" href="/vendor/src-noconflict/mode-prolog.js">here</a>. Please send a copy to <a target="_blank" href="mailto:torbjorn.lager@gmail.com">me</a> if you are able to fix any of the highlighting issues.
            </li>
            <li>
              The code determining the permission for executing code on the <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> server takes a white-list approach, using a slightly updated version of Jan's <code>library(sandbox)</code>. If you find predicates that you think could be permitted but are not, please send <a target="_blank" href="mailto:torbjorn.lager@gmail.com">me</a> a message and I will update the list.
            </li>
          </ul>
          </p>
          <h4 id="technology">Technology</h4>
          <p>
            <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> is implemented in a combination of Prolog, HTML, CSS and JavaScript. The only framework used is <a target="_blank" href="http://twitter.github.io/bootstrap/">Bootstrap</a> and the choice of editor landed on the very capable <a target="_blank" href="http://ace.ajax.org/">ACE editor</a>. The server serves static HTML, CSS and JavaScript code only, none of that is dynamically generated on the server. Instead, to create behaviour, the main traffic between server and client consists of the JSON responses from the server guiding the transformation of the browser's DOM on the client side. To me that looks like the cleanest interface between a server and a client one can hope to get on the web.
          </p>
          <p>The server is of course written in SWI-Prolog, using a technique that was explored by Jan and myself a couple of years ago. I have recently been able to extend it to handle not only "backtracking over HTTP" but also <code>read/1</code>-ing from and <code>write/1</code>-ing to the user's browser. Moreover, although it is unlikely to have reached its final form, I have also written a tiny JavaScript wrapper making it <em>much</em> easier to deal with the Prolog web-api. The source code is <a target="_blank" href="/assets/js/prolog.js">here</a>.
          </p>
          <h4 id="license">License</h4>
          <p>
            <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> may only be distributed using the GNU General Public License. See <a target="_blank" href="http://www.swi-prolog.org/license.html">here</a> for details on SWI-Prolog licensing policies supporting both free and non-free software. 
          </p>
          <h4 id="source_code">Source code</h4>
          <p>
            The source code for <span style="color:darkblue">SWI</span><span style="color:maroon">SH</span> is available on <a target="_blank" href="https://github.com/spyderbrain/swish">GitHub</a>.
          </p>
        </div>
      </div>
      <!-- Begin page content -->
      <div class="container">
        <pre id="editor"></pre>
        <div class="vertical-toolbar">
          <ul data-toggle="buttons-radio">
            <li title="Query console">
              <a class="btn btn-small sq active" onclick="$('#console').show(); $('#documentation').hide(); $('#preferences').hide();">
              <i class="icon-question-sign icon-large"></i>
              </a>
            </li>
<!--
            <li title="Documentation">
              <a class="btn btn-small sq" onclick="$('#documentation').show(); $('#console').hide(); $('#preferences').hide();">
              <i class="icon-book icon-large"></i>
              </a>
            </li>
-->
            <li title="Preferences">
              <a class="btn btn-small sq" onclick="$('#preferences').show(); $('#console').hide(); $('#documentation').hide();">
              <i class="icon-cog icon-large"></i>
              </a>
            </li>
          </ul>
        </div>
        <div id="console">
          <div id="results">
            <div id="presentation"></div>
          </div>
          <div class="form-horizontal" id="controls" onclick="return false">
              <fieldset>
                <div class="control-group">
                  <label class="control-label" for="cmdlineeditor">Goal</label>
                  <div class="controls">
                    <div class="input-append">
                      <pre class="input-xlarge" id="cmdlineeditor"></pre>
                      <div class="btn-group dropup">
                        <button id="examples-btn" class="btn btn-mini dropdown-toggle" data-toggle="dropdown">
                        Examples
                        <span class="caret"></span>
                        </button>
                        <ul id="examples" class="dropdown-menu">
<!--
							<li><a href='#' onclick='setGoal("?- member(X, [1,2,3,4])")'>?- member(X, [1,2,3,4])</a></li>
							<li><a href='#' onclick='setGoal("?- append(A, B, [1,2,3,4])")'>?- append(A, B, [1,2,3,4])</a></li>
							<li><a href='#' onclick='setGoal("?- repeat, write(a), fail")'>?- repeat, write(a), fail</a></li>
							<li><a href='#' onclick='setGoal("?- repeat, read(X), write(X), X=stop")'>?- repeat, read(X), write(X), X=stop</a></li>
-->
                        </ul>
                      </div>
                      <div class="btn-group dropup">
                        <button id="history-btn" class="btn btn-mini dropdown-toggle" data-toggle="dropdown">
                        History
                        <span class="caret"></span>
                        </button>
                        <ul id="history" class="dropdown-menu"></ul>
                      </div>
                      <div class="btn-group">
                        <button id="clear-btn-query"class="btn btn-mini">Clear</button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="control-group">
                  <label class="control-label" for="ask-btn">Action</label>
                  <div class="controls">
                    <button id="ask-btn" class="btn btn-small btn-primary">Solve</button>
                    <button id="more-btn" class="btn btn-small btn-success" disabled>Again</button>
                    <button id="stop-btn" class="btn btn-small btn-danger" disabled>Stop</button>
                    <button id="abort-btn" class="btn btn-small btn-inverse">Abort</button>
                    <button id="clear-btn" class="btn btn-small btn-info pull-right" style="margin-right:45px;">Clear</button>
                  </div>
                </div>
                <div class="control-group">
                  <label id="prompt" class="control-label" for="reader">|:</label>
                  <div class="controls">
                    <input id="reader" type="text" class="input-xlarge" autocomplete="off" disabled>
                  </div>
                </div>
              </fieldset>
          </div>
        </div>
        <div id="documentation"></div>
        <div id="preferences">
          <div style="padding:0 50px">
          <form class="form-horizontal" >
            <fieldset>
                <legend>&nbsp;General</legend>
                <div class="control-group">
                  <label class="control-label" for="ask-btn">Theme</label>
                  <div class="controls">
                    <select id="theme-menu" class="input">
                      <option value="chrome">chrome</option>
                      <option value="clouds">clouds</option>
                      <option value="dawn">dawn</option>
                      <option value="dreamweaver">dreamweaver</option>
                      <option value="eclipse">eclipse</option>
                      <option value="github">github</option>
                      <option selected value="textmate">textmate</option>
                      <option value="tomorrow">tomorrow</option>
                      <option value="xcode">xcode</option>
                    </select>
                  </div>
                </div>
            </fieldset>
            <fieldset>
                <legend>&nbsp;Editor</legend>
                <div class="control-group">
                  <label class="control-label" for="ask-btn">Font family</label>
                  <div class="controls">
                    <select id="font-family-menu" class="input">
                      <option value="'andale mono',monospace">Andale Mono</option>
                      <option value="consolas,monospace">Consolas</option>
                      <option selected value="'courier new',monospace">Courier New</option>
                      <option value="courier,monospace">Courier</option>
                      <option value="monaco,monospace">Monaco</option>
                      <option value="menlo,monospace">Menlo</option>
                      <option value="'ubuntu mono',monospace">Ubuntu Mono</option>
                      <option value="'dejavu',monospace">Dejavu</option>
                    </select>
                  </div>
                </div>
                <div class="control-group">
                  <label class="control-label" for="font-size-menu">Font size</label>
                  <div class="controls ">
                    <select id="font-size-menu" class="input-mini inline">
                      <option value="10">10</option>
                      <option selected value="12">12</option>
                      <option value="14">14</option>
                      <option value="16">16</option>
                      <option value="18">18</option>
                      <option value="20">20</option>
                    </select>
                  </div>
                </div>
                <div class="control-group">
                  <label class="control-label" for="tab-size-menu">Tab size</label>
                  <div class="controls ">
                    <select id="tab-size-menu" class="input-mini inline">
                      <option value="2">2</option>
                      <option selected value="4">4</option>
                      <option value="6">6</option>
                      <option value="8">8</option>
                    </select>
                    <input style="vertical-align:middle;position:relative;bottom:3px;margin-left:20px;" name="tab-soft-checkbox" id="tab-soft-checkbox" checked type="checkbox">
                    <span>&nbsp;Use soft tabs</span>
                  </div>
                </div>
                <div class="control-group">
                  <label class="control-label" for="checkboxes">Line</label>
                  <div class="controls">
                    <label class="checkbox inline" for="linewrap-checkbox">
                      <input name="line-wrap-checkbox" id="line-wrap-checkbox" checked type="checkbox">
                      Wrap
                    </label>
                    <label class="checkbox inline" for="line-highlight-checkbox">
                      <input name="line-highlight-checkbox" id="line-highlight-checkbox" type="checkbox">
                      Highlight
                    </label>
                    <label class="checkbox inline" for="line-numbering-checkbox">
                      <input name="line-numbering-checkbox" id="line-numbering-checkbox" checked type="checkbox">
                      Numbers
                    </label>
                  </div>
                </div>
            </fieldset>
          </form>
        </div>
        </div>
      </div>
      <div id="push"></div>
    </div>
    <div id="footer">
      <div class="container">
        <p class="muted credit">Homage to <a target="_blank" href="http://www.swi-prolog.org/">SWI-Prolog</a>. &copy; Torbjörn Lager and <a target="_blank" href="http://spyderbrain.ling.gu.se/">Spyderbrain Technologies</a>, 2013.</p>
      </div>
    </div>
    <!-- Le javascript
      ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="vendor/bootstrap/js/jquery.js"></script>
    <script src="vendor/bootstrap/js/bootstrap-transition.js"></script>
    <script src="vendor/bootstrap/js/bootstrap-alert.js"></script>
    <script src="vendor/bootstrap/js/bootstrap-modal.js"></script>
    <script src="vendor/bootstrap/js/bootstrap-dropdown.js"></script>
    <script src="vendor/bootstrap/js/bootstrap-button.js"></script>
    <script src="vendor/bootstrap/js/bootstrap-collapse.js"></script>
    <script type="text/javascript" src="assets/js/prolog.js"></script>
    <script src="vendor/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/js/app.js" type="text/javascript" charset="utf-8"></script>
  </body>
</html>